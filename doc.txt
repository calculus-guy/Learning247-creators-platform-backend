{
  "firstname": "Test",
  "lastname": "User",
  "email": "testuser@example.com",
  "password": "password123",
  "confirmPassword": "password123"
}


{
  "email": "admin@example.com",
  "password": "123456"
}


 How to TEST with Postman
1. Get a valid Authorization: Bearer <token> by logging in with your existing /auth/login endpoint.2. Use the endpoints above:
•	Set the Authorization header as required.
•	Use the Body (raw, JSON) for POSTs as shown above.
________________________________________
Sample Testing Flows
A. Create Live Class
•	Method: POST
•	URL: http://localhost:8080/live/create
•	Headers: Authorization: Bearer <token>
•	Body: as shown above
•	Expect: 201 Created, returns liveClass info with stream key, RTMP, playbackId.
B. Add a Host
•	Method: POST
•	URL: http://localhost:8080/live/{liveClassId}/add-host
•	Body: { "userId": 2, "role": "cohost" }
•	Expect: Success or already exists error
C. Add an Attendee
•	Method: POST
•	URL: http://localhost:8080/live/{liveClassId}/add-attendee
•	Body: { "userId": 5, "statusPaid": true }
•	Expect: Added attendee or error
D. Get Info/Playback/Lists
•	GET /live/{id}
•	GET /live/{id}/playback
•	GET /live/{id}/hosts
•	GET /live/{id}/attendees
________________________________________
Common Errors
•	401 Unauthorized: Missing or invalid JWT token
•	404 Not Found: Class ID wrong or not existing
•	400 Bad Request: Invalid input, host or attendee already exists
________________________________________
Process Flow Explained
1.	Live class is created — backend provisions on Mux, saves all keys/tokens for creator and OBS.
2.	Host/Attendee management — only users in the system can host, co-host, or attend a class.
3.	Streaming — Creator streams to OBS using RTMP/stream key (from create response).
4.	Live player — Any user (or only attendees, up to frontend logic) accesses the playback URL to watch live.
5.	Stream finishes — Mux's webhook will update backend status and fill in recording asset (replay works on same /playback endpoint).


https://prod-api.aahbibi.com/videos/upload








const dotenv = require("dotenv");
dotenv.config();

const cors = require('cors');
const express = require('express');
const passport = require('passport');
const session = require('express-session');
const cookieParser = require('cookie-parser');
const webhookRoutes = require('./routes/webhookRoutes');
const authRoutes = require('./routes/authRoutes');
const registrationRoutes = require('./routes/registrationRoutes');
const videoRoutes = require('./routes/videoRoutes');
const liveRoutes = require('./routes/liveRoutes');
const userRoutes = require('./routes/userRoutes');
const rateLimiter = require('./middleware/rateLimiter');
const sequelize = require('./config/db');

const app = express();

// const allowedOrigins = [
//   'https://www.aahbibi.com',
//   'https://aahbibi.com',
//   'http://localhost:3000',
//   'http://localhost:3001',
//   'https://aistudio.google.com'
// ];

// const corsOptions = {
//   origin: function (origin, callback) {
//     if (!origin) return callback(null, true);
//     if (allowedOrigins.includes(origin)) return callback(null, true);
//     return callback(new Error("CORS blocked: " + origin), false);
//   },
//   credentials: true,
//   methods: "GET,HEAD,PUT,PATCH,POST,DELETE",
//   optionsSuccessStatus: 200,
// };

// app.use(cors(corsOptions));


app.use(
  "/api/webhooks", webhookRoutes
);

app.use(cookieParser());

app.use(express.json());
app.use(express.urlencoded({ extended: true }));


app.use(session({
  secret: process.env.SESSION_SECRET,
  resave: false,
  saveUninitialized: true,
}));

app.use(passport.initialize());
app.use(passport.session());

app.use('/auth', authRoutes);
app.use('/register', rateLimiter);
app.use('/event', registrationRoutes);
app.use('/live', liveRoutes);
app.use('/users', userRoutes);

app.use('/uploads', express.static('uploads'));

app.use('/videos', videoRoutes);


const PORT = process.env.PORT || 8080;

sequelize.sync({ force: false })
  .then(() => {
    app.listen(PORT, () =>
      console.log(`Server running on http://localhost:${PORT}`)
    );
  })
  .catch(err => console.error('DB Connection Failed:', err));



  ssh -i "C:\Users\HP\Documents\Learning247-creators\backend\autoware.pem" ubuntu@34.251.237.6

   npx sequelize-cli db:migrate